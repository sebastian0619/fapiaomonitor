version: '3'

services:
  invoice-monitor:
    build: .
    container_name: invoice-monitor
    volumes:
      # 监控目录映射
      - ${WATCH_DIR:-./watch}:/watch
      # 上传目录映射
      - ${UPLOAD_DIR:-./uploads}:/app/uploads
      # 临时文件目录映射
      - ${TEMP_DIR:-./tmp}:/app/tmp
      # 配置文件映射
      - ${CONFIG_FILE:-./config.json}:/app/config.json
    ports:
      # Web UI 端口映射
      - "${UI_PORT:-8080}:8080"
    environment:
      # 环境变量配置
      - WATCH_DIR=/watch
      - LOG_LEVEL=INFO
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s 